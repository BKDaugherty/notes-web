(this["webpackJsonpnotes-web"]=this["webpackJsonpnotes-web"]||[]).push([[0],{91:function(t,e,n){},98:function(t,e,n){"use strict";n.r(e);var a=n(7),r=n(0),i=n.n(r),o=n(12),c=n.n(o),s=(n(91),n(63)),l=n(52),u=n(31),h=n(32),d=n(21),p=n(34),b=n(33),f=n(39),j=n(75),g=n(145),v=n(4),O=n(150),m=n(159),x=n(155),y=n(142),k=n(149),w=n(160),C=n(151),T=n(44),S=n(147),N=n(99),_=n(148),E=n(74),A=n.n(E),W=n(156),B=n(157),L=n(73),P=n.n(L),F=n(72),I=n.n(F),U=n(162),J=n(154),D=n(153),H=n(152),M=n(158),q=n(22),z=n.n(q),G=n(43),R="http://localhost:9001/",$=[{title:"Article"},{title:"Book"},{title:"Movie"},{title:"Career"},{title:"Entertainment"},{title:"Productivity"},{title:"ArtificialIntelligence"},{title:"EffectiveAltruism"},{title:"SocialJustice"}],K=function(){var t=Object(G.a)(z.a.mark((function t(){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",$);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=Object(G.a)(z.a.mark((function t(e){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(R+"notes/archive/"+String(e),{method:"PUT"}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(G.a)(z.a.mark((function t(e){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.tags=e.tags.map(Z),t.abrupt("return",fetch(R+"notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=Object(G.a)(z.a.mark((function t(e){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.tags=e.tags.map(Z),t.abrupt("return",fetch(R+"note/"+e.note_id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(t,e){return t.title===e.title},Z=function(t){return t.title},tt=function(t){return"string"==typeof t?{title:t}:(console.error("Unknown tag variant:",t),t)},et={get_tags:K,create_note:V,update_note:X,get_notes:function(t){return fetch(R+"notes/brendon").then((function(t){return t.json().then((function(t){for(var e=[],n=0,a=Object.values(t.notes);n<a.length;n++){var r=a[n];r.tags=r.tags.map(tt),e.push(r)}return e.sort((function(t,e){return t.last_update_time<e.last_update_time?1:-1})),e}))}))},archive_note:Q},nt=[],at=function(t){return{fullHeight:Object(f.a)({},t.mixins.toolbar),text:{padding:t.spacing(2,2,0)},addButton:{position:"absolute",zIndex:1,bottom:"10%",right:"5%",margin:"0 auto"},paper:{paddingBottom:50},list:{marginBottom:t.spacing(2)},subheader:{backgroundColor:t.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1}}},rt=function(t){Object(p.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).changeTab=function(t,e){a.setState({currentTab:e})},a.state={currentTab:"notes"},a.changeTab=a.changeTab.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"render",value:function(){var t=Object(j.a)({palette:{primary:{light:"#757ce8",main:"#000000",dark:"#002884",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"},background:{paper:"#efefef",default:"#fff"}}});return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(y.a,{}),Object(a.jsxs)(g.a,{theme:t,children:["notes"===this.state.currentTab&&Object(a.jsx)(pt,{}),"lists"===this.state.currentTab&&Object(a.jsx)(bt,{}),Object(a.jsx)(dt,{changeTab:this.changeTab,currentTab:this.state.currentTab})]})]})}}]),n}(i.a.Component),it=function(t){Object(p.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).handleOpen=function(t){a.setState({open:!0,active_uuid:t.uuid,title:t.title,description:t.description,tags:t.tags})},a.handleCreate=function(){a.setState({open:!0,active_uuid:null,title:"",description:"",origin:"",tags:[]})},a.handleClose=function(){a.setState({open:!1,active_note:null})},a.handleSearchChange=function(t,e){a.setState({search:e})},a.state={open:!1,search:[],active_uuid:"",title:"",description:"",owner:"brendon",origin:"",tags:[],notes:[]},a.handleNoteTagEdit=a.handleNoteTagEdit.bind(Object(d.a)(a)),a.handleNoteEdit=a.handleNoteEdit.bind(Object(d.a)(a)),a.handleOpen=a.handleOpen.bind(Object(d.a)(a)),a.handleSave=a.handleSave.bind(Object(d.a)(a)),a.handleArchive=a.handleArchive.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.loadNotes()}},{key:"loadNotes",value:function(){var t=this;et.get_notes("brendon").then((function(e){t.setState({notes:e})})).catch(console.log)}},{key:"handleArchive",value:function(){var t=this,e=this.state.active_uuid;et.archive_note(e).then((function(e){t.loadNotes()})).catch(console.error)}},{key:"handleNoteEdit",value:function(t){this.setState(Object(l.a)({},t.target.name,t.target.value))}},{key:"handleNoteTagEdit",value:function(t,e){this.setState({tags:e})}},{key:"handleSave",value:function(){var t=this;if(this.state.active_uuid){var e={note_id:this.state.active_uuid,title:this.state.title,description:this.state.description,origin:this.state.origin,tags:this.state.tags};et.update_note(e).then((function(e){t.loadNotes()})).catch(console.error)}else{var n={title:this.state.title,description:this.state.description,owner:this.state.owner,origin:this.state.origin,tags:this.state.tags};et.create_note(n).then((function(e){t.loadNotes(),t.handleClose()})).catch(console.error)}}},{key:"render",value:function(){var t=this,e=this.props.classes;return Object(a.jsxs)(N.a,{square:!0,className:e.paper,children:[this.state.open&&Object(a.jsx)(st,{handleClose:this.handleClose,handleChange:this.handleNoteEdit,handleNoteTagEdit:this.handleNoteTagEdit,handleSave:this.handleSave,handleArchive:this.handleArchive,open:this.state.open,title:this.state.title,description:this.state.description,origin:this.state.origin,tags:this.state.tags}),Object(a.jsx)(m.a,{multiple:!0,options:$,getOptionLabel:function(t){return t.title},value:this.state.search,onChange:this.handleSearchChange,renderInput:function(t){return Object(a.jsx)(M.a,Object(f.a)(Object(f.a)({},t),{},{fullWidth:!0,variant:"filled",placeholder:"Search..."}))}}),Object(a.jsx)(_.a,{className:e.list,children:this.state.notes.filter((function(e){if(null==e.delete_time)return!1;if(t.state.search.length>0){var n,a=Object(s.a)(t.state.search);try{for(a.s();!(n=a.n()).done;){var r,i=n.value,o=!1,c=Object(s.a)(e.tags);try{for(c.s();!(r=c.n()).done;){var l=r.value;Y(i,l)&&(o=!0)}}catch(u){c.e(u)}finally{c.f()}if(!o)return!1}}catch(u){a.e(u)}finally{a.f()}}return!0})).map((function(e,n){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(ut,{note_data:e,onClick:function(){t.handleOpen(e)}},"note-entry-".concat(n))})}))}),Object(a.jsx)(k.a,{color:"secondary","aria-label":"add",className:e.addButton,children:Object(a.jsx)(S.a,{color:"inherit",onClick:this.handleCreate,children:Object(a.jsx)(I.a,{})})})]})}}]),n}(i.a.Component),ot=function(t){Object(p.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props.classes;return Object(a.jsxs)(N.a,{square:!0,className:t.paper,children:[Object(a.jsx)(T.a,{className:t.text,variant:"h5",gutterBottom:!0,children:"Lists"}),Object(a.jsx)(_.a,{className:t.list,children:nt.map(ht)})]})}}]),n}(i.a.Component),ct=function(t){Object(p.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.classes,n=t.currentTab,r=t.changeTab;return Object(a.jsx)(O.a,{position:"fixed",color:"primary",className:e.appBar,children:Object(a.jsxs)(w.a,{value:n,onChange:r,variant:"fullWidth","aria-label":"tabs",children:[Object(a.jsx)(C.a,{classes:{root:e.fullHeight},icon:Object(a.jsx)(P.a,{}),value:"notes"}),Object(a.jsx)(C.a,{classes:{root:e.fullHeight},icon:Object(a.jsx)(A.a,{}),value:"lists"})]})})}}]),n}(i.a.Component),st=function(t){Object(p.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.open,n=t.handleChange,r=t.handleNoteTagEdit,i=t.handleClose,o=t.handleSave,c=t.handleArchive,s=t.title,l=t.tags,u=t.description;return Object(a.jsxs)(U.a,{open:e,onClose:i,scroll:"paper","aria-labelledby":"Note Dialog","aria-describedby":"Existing Note",children:[Object(a.jsx)(H.a,{children:Object(a.jsx)(M.a,{margin:"dense",name:"title",label:"Title",type:"text",fullWidth:!0,value:s,onChange:n})}),Object(a.jsxs)(D.a,{dividers:!0,children:[Object(a.jsx)(M.a,{margin:"dense",name:"description",type:"text",multiline:!0,rows:8,value:u,onChange:n,fullWidth:!0}),Object(a.jsx)(lt,{onChange:r,name:"tags",tags:l})]}),Object(a.jsxs)(J.a,{children:[Object(a.jsx)(x.a,{onClick:c,color:"primary",children:"Archive"}),Object(a.jsx)(x.a,{onClick:o,color:"primary",children:"Save"}),Object(a.jsx)(x.a,{onClick:i,color:"primary",children:"Close"})]})]})}}]),n}(i.a.Component),lt=function(t){Object(p.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.name,n=t.onChange,r=t.tags;return Object(a.jsx)(m.a,{multiple:!0,name:e,onChange:n,value:r,options:$,getOptionLabel:function(t){return t.title},getOptionSelected:function(t,e){return Y(t,e)},renderInput:function(t){return Object(a.jsx)(M.a,Object(f.a)(Object(f.a)({},t),{},{label:"Tags",fullWidth:!0}))}})}}]),n}(i.a.Component),ut=function(t){Object(p.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props,e=t.note_data,n=t.onClick,r=new Date(1e3*Number(e.last_update_time)).toLocaleString();return Object(a.jsx)(W.a,{divider:!0,button:!0,onClick:n,children:Object(a.jsx)(B.a,{primary:e.title,secondary:r})})}}]),n}(i.a.Component),ht=function(t){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(W.a,{button:!0,children:Object(a.jsx)(B.a,{primary:t.title,secondary:t.description})})},t.id)},dt=Object(v.a)(at)(ct),pt=Object(v.a)(at)(it),bt=Object(v.a)(at)(ot),ft=Object(v.a)(at)(rt),jt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function gt(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var vt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,164)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),i(t),o(t)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(ft,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/notes-web",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/notes-web","/service-worker.js");jt?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):gt(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):gt(e,t)}))}}(),vt()}},[[98,1,2]]]);
//# sourceMappingURL=main.4a8d410b.chunk.js.map