(this["webpackJsonpnotes-web"]=this["webpackJsonpnotes-web"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),i=n.n(r),c=n(12),s=n.n(c),o=(n(93),n(64)),l=n(26),u=n(15),h=n(16),d=n(25),j=n(18),b=n(17),p=n(36),f=n(76),v=n(147),O=n(4),g=n(154),m=n(163),x=n(151),y=n(144),C=n(166),w=n(152),k=n(148),T=n(162),S=n(155),E=n(45),N=n(153),_=n(101),L=n(150),P=n(74),D=n.n(P),A=n(159),B=n(160),W=n(73),F=n.n(W),H=n(72),I=n.n(H),V=n(165),U=n(158),R=n(157),J=n(156),M=n(161),G=n(27),q=n.n(G),z=n(44),$="https://typed-thoughts.herokuapp.com/",K=function(){function e(t,n){Object(u.a)(this,e),this.title=t,this.canHaveValue=n,this.value=null}return Object(h.a)(e,[{key:"setValue",value:function(e){this.canHaveValue?this.value=e:console.error("Attempting to set value for tag that can't have value")}}]),e}(),Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new K(e,t)},X=[Q("Article"),Q("Book"),Q("Movie"),Q("Music"),Q("Series"),Q("Podcast"),Q("Recipe"),Q("Restaurant"),Q("Adventure"),Q("VideoGame"),Q("BoardGame"),Q("Career"),Q("Entertainment"),Q("Productivity"),Q("ArtificialIntelligence"),Q("EffectiveAltruism"),Q("SocialJustice"),Q("Environmental"),Q("RecommendedBy",!0),Q("RemindsMeOf",!0),Q("Origin",!0)],Y=function(){var e=Object(z.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(z.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch($+"notes/archive/"+String(t),{method:"PUT"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(z.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tags=t.tags.map(ae),e.abrupt("return",fetch($+"notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(z.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tags=t.tags.map(ae),e.abrupt("return",fetch($+"note/"+t.note_id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(e,t){return e.canHaveValue&&t.canHaveValue&&e.value&&t.value?e.value.toLowerCase()===t.value.toLowerCase()&&e.title===t.title:e.title===t.title},ae=function(e){return e.canHaveValue?Object(l.a)({},e.title,e.value.toLowerCase()):e.title},re=function(e){if("string"===typeof e)return Q(e);if("object"===typeof e){var t=Object.keys(e)[0],n=e[t],a=Q(t,!0);return a.setValue(n),a}return console.error("Unknown tag variant:",e),e},ie={get_tags:Y,create_note:ee,update_note:te,get_notes:function(e){return fetch($+"notes/brendon").then((function(e){return e.json().then((function(e){for(var t=[],n=0,a=Object.values(e.notes);n<a.length;n++){var r=a[n];r.tags=r.tags.map(re),r.tags.sort((function(e,t){return e.title.localeCompare(t.title)})),t.push(r)}return t.sort((function(e,t){return e.last_update_time<t.last_update_time?1:-1})),t}))}))},archive_note:Z},ce=[],se=function(e){return{fullHeight:Object(p.a)({},e.mixins.toolbar),text:{padding:e.spacing(2,2,0)},addButton:{position:"fixed",zIndex:1,bottom:"10%",right:"5%",margin:"0 auto"},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2)},subheader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1}}},oe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).setOwner=function(e){return function(){a.setState({owner:e})}},a.state={owner:"brendon"},a.setOwner=a.setOwner.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"render",value:function(){var e=Object(f.a)({palette:{primary:{light:"#757ce8",main:"#000000",dark:"#002884",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"},background:{paper:"#efefef",default:"#fff"}}});return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(y.a,{}),Object(a.jsxs)(v.a,{theme:e,children:[this.state.owner&&Object(a.jsx)(ue,{owner:this.state.owner}),!this.state.owner&&Object(a.jsx)(le,{setOwner:this.setOwner})]})]})}}]),n}(i.a.Component),le=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={user:""},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.setOwner;return Object(a.jsx)(k.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:Object(a.jsxs)(_.a,{children:[Object(a.jsx)(E.a,{variant:"h1",children:"Recs"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(M.a,{name:"owner",label:"Owner",type:"text",value:this.state.user,onChange:function(t){e.setState({user:t.target.value})}}),Object(a.jsx)(x.a,{variant:"contained",onClick:t(this.state.user),color:"primary",children:"Login"})]})]})})}}]),n}(i.a.Component),ue=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).changeTab=function(e,t){a.setState({currentTab:t})},a.state={currentTab:"notes"},a.changeTab=a.changeTab.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:["notes"===this.state.currentTab&&Object(a.jsx)(ye,{owner:this.props.owner}),"lists"===this.state.currentTab&&Object(a.jsx)(Ce,{}),Object(a.jsx)(xe,{changeTab:this.changeTab,currentTab:this.state.currentTab})]})}}]),n}(i.a.Component),he=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleOpen=function(e){a.setState({open:!0,active_uuid:e.uuid,title:e.title,description:e.description,tags:e.tags})},a.handleCreate=function(){a.setState({open:!0,active_uuid:null,title:"",description:"",origin:"",tags:[]})},a.handleClose=function(){a.setState({open:!1,active_note:null})},a.handleTagListChange=function(e){return function(t){return function(n,r){var i=n.target.name.split("-")[0];t[i].value=n.target.value,a.setState(Object(l.a)({},e,t))}}},a.handleListEntryDelete=function(e){return function(t){return function(n){return function(){t.splice(n,1),a.setState(Object(l.a)({},e,t))}}}},a.handleTagPickerChange=function(e){return function(t,n){a.setState(Object(l.a)({},e,n))}},a.state={open:!1,search:[],active_uuid:"",title:"",description:"",origin:"",tags:[],notes:[]},a.handleNoteTagEdit=a.handleNoteTagEdit.bind(Object(d.a)(a)),a.handleNoteEdit=a.handleNoteEdit.bind(Object(d.a)(a)),a.handleOpen=a.handleOpen.bind(Object(d.a)(a)),a.handleSave=a.handleSave.bind(Object(d.a)(a)),a.handleArchive=a.handleArchive.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.loadNotes()}},{key:"loadNotes",value:function(){var e=this;ie.get_notes(this.props.owner).then((function(t){e.setState({notes:t})})).catch(console.log)}},{key:"handleArchive",value:function(){var e=this,t=this.state.active_uuid;ie.archive_note(t).then((function(t){e.loadNotes()})).catch(console.error)}},{key:"handleNoteEdit",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"handleNoteTagEdit",value:function(e,t){this.setState({tags:t})}},{key:"handleSave",value:function(){var e=this;if(this.state.active_uuid){var t={note_id:this.state.active_uuid,title:this.state.title,description:this.state.description,origin:this.state.origin,tags:this.state.tags};ie.update_note(t).then((function(t){e.loadNotes()})).catch(console.error)}else{var n={title:this.state.title,description:this.state.description,owner:this.props.owner,origin:this.state.origin,tags:this.state.tags};ie.create_note(n).then((function(t){e.loadNotes(),e.handleClose()})).catch(console.error)}}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(a.jsxs)(_.a,{square:!0,className:t.paper,children:[this.state.open&&Object(a.jsx)(be,{handleClose:this.handleClose,handleChange:this.handleNoteEdit,handleNoteTagEdit:this.handleNoteTagEdit,handleTagListChange:this.handleTagListChange,handleListEntryDelete:this.handleListEntryDelete,handleSave:this.handleSave,handleArchive:this.handleArchive,open:this.state.open,title:this.state.title,description:this.state.description,origin:this.state.origin,tags:this.state.tags}),Object(a.jsx)(fe,{handlePickerChange:this.handleTagPickerChange("search"),handleListEntryChange:this.handleTagListChange("search"),handleListEntryDelete:this.handleListEntryDelete("search"),value:this.state.search,inputPlaceholder:"Search for tags...",variant:"filled"}),Object(a.jsx)(L.a,{className:t.list,children:this.state.notes.filter((function(t){if(null!=t.delete_time)return!1;if(e.state.search.length>0){var n,a=Object(o.a)(e.state.search);try{for(a.s();!(n=a.n()).done;){var r,i=n.value,c=!1,s=Object(o.a)(t.tags);try{for(s.s();!(r=s.n()).done;){var l=r.value;ne(i,l)&&(c=!0)}}catch(u){s.e(u)}finally{s.f()}if(!c)return!1}}catch(u){a.e(u)}finally{a.f()}}return!0})).map((function(t,n){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(ge,{note_data:t,onClick:function(){e.handleOpen(t)}},"note-entry-".concat(n))})}))}),Object(a.jsx)(w.a,{color:"secondary","aria-label":"add",className:t.addButton,children:Object(a.jsx)(N.a,{color:"inherit",onClick:this.handleCreate,children:Object(a.jsx)(I.a,{})})})]})}}]),n}(i.a.Component),de=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(a.jsxs)(_.a,{square:!0,className:e.paper,children:[Object(a.jsx)(E.a,{className:e.text,variant:"h5",gutterBottom:!0,children:"Lists"}),Object(a.jsx)(L.a,{className:e.list,children:ce.map(me)})]})}}]),n}(i.a.Component),je=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.currentTab,r=e.changeTab;return Object(a.jsx)(g.a,{position:"fixed",color:"primary",className:t.appBar,children:Object(a.jsxs)(T.a,{value:n,onChange:r,variant:"fullWidth","aria-label":"tabs",children:[Object(a.jsx)(S.a,{classes:{root:t.fullHeight},icon:Object(a.jsx)(F.a,{}),value:"notes"}),Object(a.jsx)(S.a,{classes:{root:t.fullHeight},icon:Object(a.jsx)(D.a,{}),value:"lists"})]})})}}]),n}(i.a.Component),be=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.open,n=e.handleChange,r=e.handleNoteTagEdit,i=e.handleTagListChange,c=e.handleListEntryDelete,s=e.handleClose,o=e.handleSave,l=e.handleArchive,u=e.title,h=e.tags,d=e.description;return Object(a.jsxs)(V.a,{open:t,onClose:s,scroll:"paper","aria-labelledby":"Note Dialog","aria-describedby":"Existing Note",children:[Object(a.jsx)(J.a,{children:Object(a.jsx)(M.a,{margin:"dense",name:"title",label:"Title",type:"text",fullWidth:!0,value:u,onChange:n})}),Object(a.jsxs)(R.a,{dividers:!0,children:[Object(a.jsx)(M.a,{margin:"dense",name:"description",type:"text",multiline:!0,rows:8,value:d,onChange:n,fullWidth:!0}),Object(a.jsx)(fe,{handlePickerChange:r,handleListEntryChange:i("tags"),handleListEntryDelete:c("tags"),value:h,variant:"standard",inputPlaceholder:"Edit tags..."})]}),Object(a.jsxs)(U.a,{children:[Object(a.jsx)(x.a,{onClick:l,color:"primary",children:"Archive"}),Object(a.jsx)(x.a,{onClick:o,color:"primary",children:"Save"}),Object(a.jsx)(x.a,{onClick:s,color:"primary",children:"Close"})]})]})}}]),n}(i.a.Component),pe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{ref:this.props.InputProps.ref,children:Object(a.jsx)(M.a,Object(p.a)(Object(p.a)({},this.props),{},{fullWidth:!0}))})}}]),n}(i.a.Component),fe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.handlePickerChange,r=e.handleListEntryChange,i=e.handleListEntryDelete,c=e.inputPlaceholder,s=e.variant;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{multiple:!0,options:X,getOptionLabel:function(e){return e.title},value:t,onChange:n,renderTags:function(){},getOptionSelected:function(e,t){return ne(e,t)},renderInput:function(e){return Object(a.jsx)(pe,Object(p.a)(Object(p.a)({},e),{},{variant:s,placeholder:c}))}}),Object(a.jsx)(ve,{value:t,onChange:r,handleDelete:i})]})}}]),n}(i.a.Component),ve=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.value,n=this.props.onChange(t);return Object(a.jsxs)(k.a,{spacing:1,container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(a.jsx)(k.a,{item:!0,children:t.length>0&&Object(a.jsx)(E.a,{children:"Tags:"})}),t.map((function(r,i){return Object(a.jsx)(k.a,{item:!0,children:Object(a.jsx)(Oe,Object(p.a)({editable:!0,tag_index:i,onChange:n,handleDelete:e.props.handleDelete(t)(i)},r))})}))]})}}]),n}(i.a.Component),Oe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.editable,n=e.handleDelete,r=e.onChange,i=e.tag_index,c=e.canHaveValue,s=e.value,o=e.title,l="";return c&&s&&(l=s[0].toUpperCase()+s.substring(1,o.length)),Object(a.jsxs)(a.Fragment,{children:[!c&&!t&&Object(a.jsx)(C.a,{label:o}),!c&&t&&Object(a.jsx)(C.a,{label:o,onDelete:n}),t&&c&&Object(a.jsx)(M.a,{value:s||"",onChange:r,type:"text",name:i+"-"+o+"-value",label:o}),!t&&c&&Object(a.jsx)(C.a,{label:o+": "+l})]})}}]),n}(i.a.Component),ge=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.note_data,n=e.onClick,r=new Date(1e3*Number(t.last_update_time)).toLocaleString();return Object(a.jsxs)(A.a,{divider:!0,button:!0,onClick:n,children:[Object(a.jsx)(B.a,{primary:t.title,secondary:r}),Object(a.jsx)(k.a,{container:!0,direction:"column",justify:"flex-end",alignItems:"flex-end",children:t.tags.map((function(e){return Object(a.jsx)(k.a,{item:!0,children:Object(a.jsx)(Oe,Object(p.a)({editable:!1},e))})}))})]})}}]),n}(i.a.Component),me=function(e){return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(A.a,{button:!0,children:Object(a.jsx)(B.a,{primary:e.title,secondary:e.description})})},e.id)},xe=Object(O.a)(se)(je),ye=Object(O.a)(se)(he),Ce=Object(O.a)(se)(de),we=Object(O.a)(se)(oe),ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Te(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,168)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(we,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/notes-web",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/notes-web","/service-worker.js");ke?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Te(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Te(t,e)}))}}(),Se()},93:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.cb3e1361.chunk.js.map